# Parsing-Test-Task

## Парсинг Мосбиржи

Задача:
Реализовать асинхронное получение данных по ссылке: https://iss.moex.com/iss/index.xml

Для http запросов использовать библиотеку httpx https://pypi.org/project/httpx/

Требования:
- Запросы должны отправляться 1 раз в секунду
- Требуется предусмотреть обработку ошибок при падении запросов 
- Полученные данные складывать в DataStorage, предусмотрен метод add_data
- Как либо предварительно обрабатывать данные не требуется, просто отправляйте текст из ответа запроса


Для распараллеливания задач использовать исключительно асинхронность(asyncio)



Бонусная часть:
- В DataStorage.add_data предусмотрен asyncio.sleep на 1 секунду: выполнять метод add_data на фоне что-бы он не тормозил парсер
- Минимизировать риск падения запросов, ниже вариант решения на дублирующих запросах

Дублирующие запросы: параллельная отправка двух или более запросов для получения одних и тех же данных, они не ждут друг друга, а отменяют остальные запросы при получении первого валидного ответа одним из запросов.



P.S. Про дублирующие запросы для чего они нужны: В нашей работе часто возникают случаи когда падают запросы(кривые прокси, баны и т.д.)
и что-бы это минимизизровать мы отправляем дублирующие запросы.
В данном случае шансов падения сразу всех запросов куда ниже.

Если хоть один запрос прошел не снижается скорость доставки данных, но за это мы расплачиваемся ресурсами(CPU, Network)